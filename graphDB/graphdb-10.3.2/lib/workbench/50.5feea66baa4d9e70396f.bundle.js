(window.webpackJsonp=window.webpackJsonp||[]).push([[50,112],{39:function(t,e,a){"use strict";a.r(e),a.d(e,"ChartData",(function(){return r}));class r{static get DEFAULT_MULTIPLIER(){return 1.2}static get MAXIMUM_DIVISIONS(){return 10}static get COLORS(){return["#003663","#E84E0F","#02A99A","#999999"]}constructor(t,e,a,r){this.filter=r,this.initialChartSetup(t,e,a)}initialChartSetup(t,e,a,r=!0){this.disableRangeUpdate=e,this.disableOldDataRemoval=a,this.translateService=t,this.range=150,this.chartOptions=this.getDefaultChartOptions(t),this.chartSetup(this.chartOptions),r&&(this.dataHolder=this.createDataHolder(),this.firstLoad=!0)}refresh(){this.initialChartSetup(this.translateService,this.disableRangeUpdate,this.disableOldDataRemoval,!1),this.translateLabels(this.dataHolder),this.updateRange(this.dataHolder)}translateLabels(t){this.createDataHolder().forEach((e,a)=>{t[a].originalKey?t[a].originalKey=e.key:t[a].key=e.key})}setSubTitle(t){this.chartOptions.title.enable=!0;const e=t.map(t=>{if(Array.isArray(t.value)&&!t.value.length)return;const e=Array.isArray(t.value)?t.value.join("/"):t.value;return t.label+(void 0!==e?`<span class="data-value">${e}</span>`:"")});this.chartOptions.title.html=e.map(t=>`<span class="info-element">${t}</span>`)}chartSetup(t){}createDataHolder(){throw new Error("Must implement data holder creation")}addData(t,e){this.removeOldData(this.dataHolder,this.range),this.addNewData(this.dataHolder,t,e,this.isFirstLoad()),this.updateRange(this.dataHolder),this.firstLoad&&(this.firstLoad=!1)}removeOldData(t,e){this.disableOldDataRemoval||t[0].values.length>e&&t.forEach(t=>t.values.shift())}addNewData(t,e,a,r){}updateRange(t,e){if(this.disableRangeUpdate)return;const[a]=r.calculateMaxChartValueAndDivisions(t,e);this.chartOptions.chart.yDomain=[0,a]}isFirstLoad(){return this.firstLoad}getDefaultChartOptions(t){return{chart:{interpolate:"monotone",type:"lineChart",height:500,margin:{left:80,right:80},x:function(t){return t[0]},y:function(t){return t[1]},clipEdge:!0,noData:t.instant("resource.no_data"),showControls:!1,duration:0,rightAlignYAxis:!1,useInteractiveGuideline:!0,xAxis:{showMaxMin:!1,tickFormat:function(t){return d3.time.format("%X")(new Date(t))}},yAxis:{showMaxMin:!1,tickFormat:function(t){return t}},legend:{maxKeyLength:100},color:r.COLORS},title:{enable:!0,className:"chart-additional-info",html:" "}}}static getMaxValueFromDataHolder(t){return Math.max(...t.filter(t=>!t.disabled).flatMap(t=>r.getMaxValueForDataSeries(t)))}static getMaxValueForDataSeries(t){return Math.max(...t.values.map(t=>t[1]))}static calculateMaxChartValueAndDivisions(t,e){let a;a=Array.isArray(t)?r.getMaxValueFromDataHolder(t):r.getMaxValueForDataSeries(t);const s=Math.round(a*(e||r.DEFAULT_MULTIPLIER))||1;return[s,Math.ceil(s/r.MAXIMUM_DIVISIONS)]}static getIntegerRangeForValues(t,e){const[a,s]=r.calculateMaxChartValueAndDivisions(t,e);return d3.range(0,a+1,s)}static formatBytesValue(t,e){let a=t;e&&(a=Math.max(...e.filter(t=>!t.disabled).flatMap(t=>t.values).flatMap(t=>t[1])));const r=Math.floor(Math.log(a)/Math.log(1024));return`${(parseFloat(t)/Math.pow(1024,r)).toFixed(2)} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}`}formatNumber(t){if(t&&this.filter)return this.filter("currency")(t,"",0)}}},50:function(t,e,a){"use strict";a.r(e),a.d(e,"DiskStorageChart",(function(){return s}));var r=a(39);class s extends r.ChartData{constructor(t){super(t,!0,!0)}chartSetup(t){Object.assign(t.chart,{type:"multiBarHorizontalChart",height:250,stacked:!0,showControls:!1,xAxis:{showMaxMin:!1,tickFormat:function(t){return t}},yAxis:{showMaxMin:!1,tickFormat:function(t){return(100*t).toFixed(2)+"%"}},yDomain:[0,1]})}translateLabels(t){if(!t)return;super.translateLabels(t);const[e,a]=t;e.values.length&&a.values.length&&(e.values[0][0]=this.translateService.instant("resource.storage.data"),e.values[1][0]=this.translateService.instant("resource.storage.work"),e.values[2][0]=this.translateService.instant("resource.storage.logs"),a.values[0][0]=this.translateService.instant("resource.storage.data"),a.values[1][0]=this.translateService.instant("resource.storage.work"),a.values[2][0]=this.translateService.instant("resource.storage.logs"))}createDataHolder(){return[{key:this.translateService.instant("resource.storage.used"),color:this.chartOptions.chart.color[1],values:[]},{key:this.translateService.instant("resource.storage.free"),color:this.chartOptions.chart.color[0],values:[]}]}addNewData(t,e,a,r){const i=a.storageMemory,[n,o]=t;r&&(n.values.push([this.translateService.instant("resource.storage.data"),0]),n.values.push([this.translateService.instant("resource.storage.work"),0]),n.values.push([this.translateService.instant("resource.storage.logs"),0]),o.values.push([this.translateService.instant("resource.storage.data"),1]),o.values.push([this.translateService.instant("resource.storage.work"),1]),o.values.push([this.translateService.instant("resource.storage.logs"),1]));const l=[{label:this.translateService.instant("resource.storage.subtitle.data"),value:[s.formatBytesValue(i.dataDirUsed),s.formatBytesValue(i.dataDirFree)]},{label:this.translateService.instant("resource.storage.subtitle.work"),value:[s.formatBytesValue(i.workDirUsed),s.formatBytesValue(i.workDirFree)]},{label:this.translateService.instant("resource.storage.subtitle.logs"),value:[s.formatBytesValue(i.logsDirUsed),s.formatBytesValue(i.logsDirFree)]}];this.setSubTitle(l);const u=i.dataDirUsed+i.dataDirFree,h=i.workDirUsed+i.workDirFree,c=i.logsDirUsed+i.logsDirFree;n.values[0][1]=i.dataDirUsed/u,n.values[1][1]=i.workDirUsed/h,n.values[2][1]=i.logsDirUsed/c,o.values[0][1]=i.dataDirFree/u,o.values[1][1]=i.workDirFree/h,o.values[2][1]=i.logsDirFree/c}}}}]);